(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{8262:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consulta",function(){return a(6186)}])},5131:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var n=a(5893),i=a(7294);function r(){let[e,s]=(0,i.useState)(!1),a=(0,i.useRef)(null),[r,l]=(0,i.useState)(!1),t=async()=>{let e=localStorage.getItem("usuario");null==e&&(window.location="inicio.html");let s=JSON.parse(e),a=s.stsTokenManager.accessToken;try{let e=await fetch("https://placid-seen-raven.glitch.me/usuario/verificarToken",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}});if(!e.ok)throw Error("Token inv\xe1lido");let s=await e.json();return s}catch(e){throw console.log(e.message),window.location="ingreso.html",Error("Error al verificar usuario")}},o=()=>{s(!0)};(0,i.useEffect)(()=>{let e=e=>{a.current&&!a.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]),(0,i.useEffect)(()=>{localStorage.getItem("usuario")&&l(!0)},[]);let c=()=>{localStorage.removeItem("usuario");let e=localStorage.getItem("usuario");null==e?window.location="/inicio.html":window.location="/perfil",t()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("nav",{children:[(0,n.jsx)("picture",{id:"contenedor-icono-barras",onClick:o,children:(0,n.jsx)("img",{src:"./assets/img/barras.svg",alt:"",id:"icono-barras"})}),(0,n.jsx)("a",{href:"/inicio.html",children:(0,n.jsx)("h1",{id:"titulo-principal",children:"\xcdndice Diario"})}),(0,n.jsxs)("ul",{id:"lista-barra-navegacion",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"/inicio.html",children:"Inicio"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"/planes.html",children:"Planes"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"/glosario.html",children:"Glosario"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"/registro.html",children:"Reg\xedstrate"})})]})]}),e&&(0,n.jsxs)("section",{id:"menu-lateral",className:"show",ref:a,children:[(0,n.jsx)("h3",{children:"Men\xfa"}),(0,n.jsxs)("ul",{id:"lista-menu-lateral",children:[(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/inicio.html",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"./assets/img/casa.svg",alt:"",className:"iconos-menu-lateral"}),"Inicio"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/planes.html",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"./assets/img/papel.svg",alt:"",className:"iconos-menu-lateral"}),"Planes"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/glosario.html",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"./assets/img/listado.svg",alt:"",className:"iconos-menu-lateral"}),"Glosario"]})}),r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/perfil",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"",alt:"",className:"iconos-menu-lateral"}),"Perfil"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("button",{onClick:c,children:["Cerrar",(0,n.jsx)("br",{})," sesi\xf3n"]})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/ingreso.html",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"./assets/img/ingreso.svg",alt:"",className:"iconos-menu-lateral"}),"Ingresa"]})}),(0,n.jsx)("li",{children:(0,n.jsxs)("a",{href:"/registro.html",className:"links-menu-lateral",children:[(0,n.jsx)("img",{src:"./assets/img/registro.svg",alt:"",className:"iconos-menu-lateral"}),"Reg\xedstrate"]})})]})]})]})]})}function l(e){return(0,n.jsx)("footer",{id:"footer",children:(0,n.jsxs)("div",{id:"contenedor-links",children:[(0,n.jsx)("div",{id:"footer-links",children:(0,n.jsxs)("ul",{id:"footer-lista",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"footer-link",href:"./inicio.html",children:"Inicio"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"footer-link",href:"./planes.html",children:"Planes"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"footer-link",href:"./glosario.html",children:"Glosario"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"footer-link",href:"./ingreso.html",children:"Ingresa"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"footer-link",href:"./registro.html",children:"Reg\xedstrate"})})]})}),(0,n.jsx)("p",{id:"footer-parrafo",children:"Indice Diario \xa9 2023"})]})})}function t(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{}),e.children,(0,n.jsx)(l,{})]})}},6186:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var n=a(5893),i=a(7294);function r(e){let{consultas:s,setConsultas:a}=e,r=async()=>{try{let e=await fetch("https://placid-seen-raven.glitch.me/registro-consultas");if(!e.ok)throw Error("Problema al recuperar las categor\xedas");let s=await e.json();a(s)}catch(e){console.error(e)}};(0,i.useEffect)(()=>{r()},[]);let l=async e=>{try{let s="https://placid-seen-raven.glitch.me/registro-consultas?id="+e.id,a=await fetch(s,{method:"DELETE"});if(!a.ok)throw Error("No se pudo borrar la consulta");await a.json(),console.log("Categor\xeda borrada de manera exitosa"),r()}catch(e){console.error({error:e.message})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Consultas realizadas"}),(0,n.jsxs)("table",{border:1,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Indicador consultado"}),(0,n.jsx)("th",{children:"Fecha consultada"}),(0,n.jsx)("th",{children:"Acciones"})]})}),(0,n.jsx)("tbody",{children:s.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.nombreIndicador}),(0,n.jsx)("td",{children:e.fechaConsultada}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>l(e),children:"Eliminar"})})]},e.id))})]})]})}var l=a(1664),t=a.n(l);function o(e){let{consultas:s,setConsultas:a}=e,[r,l]=(0,i.useState)(""),[o,c]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[u,x]=(0,i.useState)(!0),m=async()=>{try{let e=await fetch("https://placid-seen-raven.glitch.me/registro-consultas",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombreIndicador:r,fechaConsultada:o})});if(!e.ok)throw Error("No se pudo guardar la categor\xeda...");let n=await e.json();console.dir(n),a([...s,n])}catch(e){console.error(e)}let e=o.split("-").reverse().join("-");fetch("https://mindicador.cl/api/"+"".concat(r)+"/".concat(e)).then(e=>e.json()).then(e=>{h(e)})},j=()=>{x(!1)},f=()=>{x(!0)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{children:[(0,n.jsx)("h4",{className:"titulos-de-consultas",children:"Consulta tu \xedndice diario"}),(0,n.jsxs)("p",{className:"parrafos-informativos",children:["Bienvenido al panel de consultas, tu espacio para realizar consultas m\xe1s espec\xedficas. Para comenzar, por favor selecciona el indicador de tu inter\xe9s y la fecha a consultar. Podr\xe1s ver el registro de tus consultas en tu ",(0,n.jsx)(t(),{href:"/perfil",children:"perfil"})]}),(0,n.jsxs)("div",{id:"panel-botones",children:[(0,n.jsx)("button",{id:"indices-nacionales",onClick:f,children:"Nacionales"}),(0,n.jsx)("button",{id:"indices-internacionales",onClick:j,children:"Internacionales"})]}),u?(0,n.jsxs)("div",{id:"botones-nacionales",children:[(0,n.jsx)("button",{className:"boton-indice",value:"uf",onClick:e=>l(e.target.value),children:"Unidad de Fomento (UF)"}),(0,n.jsx)("button",{className:"boton-indice",value:"ipc",onClick:e=>l(e.target.value),children:"\xcdndice de Precio al Consumidor (IPC)"}),(0,n.jsxs)("button",{className:"boton-indice",value:"utm",onClick:e=>l(e.target.value),children:["Unidad Tributaria",(0,n.jsx)("br",{}),"Mensual (UTM)"]}),(0,n.jsxs)("button",{className:"boton-indice",value:"ivp",onClick:e=>l(e.target.value),children:["\xcdndice de Valor",(0,n.jsx)("br",{}),"Promedio (IVP)"]}),(0,n.jsx)("button",{className:"boton-indice",value:"imacec",onClick:e=>l(e.target.value),children:"\xcdndice Mensual de Act. Econ\xf3mica (IMACEC)"}),(0,n.jsxs)("button",{className:"boton-indice",value:"tpm",onClick:e=>l(e.target.value),children:["Tasa de Pol\xedtica",(0,n.jsx)("br",{}),"Monetaria (TPM)"]}),(0,n.jsx)("button",{className:"boton-indice",value:"tasa_desempleo",onClick:e=>l(e.target.value),children:"Tasa de Desempleo"}),(0,n.jsx)("button",{className:"boton-indice",value:"libra_cobre",onClick:e=>l(e.target.value),children:"Libra de Cobre"})]}):(0,n.jsxs)("div",{id:"botones-internacionales",children:[(0,n.jsx)("button",{className:"boton-indice",value:"dolar",onClick:e=>l(e.target.value),children:"D\xf3lar"}),(0,n.jsx)("button",{className:"boton-indice",value:"dolar_intercambio",onClick:e=>l(e.target.value),children:"D\xf3lar de intercambio"}),(0,n.jsx)("button",{className:"boton-indice",value:"euro",onClick:e=>l(e.target.value),children:"Euro"}),(0,n.jsx)("button",{className:"boton-indice",value:"bitcoin",onClick:e=>l(e.target.value),children:"Bitcoin"})]}),(0,n.jsxs)("div",{id:"despliegue-respuesta",children:[(0,n.jsx)("h4",{children:"Selecciona una fecha"}),(0,n.jsx)("input",{type:"date",name:"fecha-query",id:"fecha-query",onChange:e=>c(e.target.value)}),(0,n.jsx)("input",{type:"submit",name:"consultar-indice",id:"consultar-indice",onClick:m})]}),d?(0,n.jsxs)("article",{children:[(0,n.jsx)("h4",{className:"titulos-de-consultas",children:"Resultado de la consulta"}),(0,n.jsxs)("p",{className:"parrafos-informativos",children:["A d\xeda de hoy, el valor del \xedndice seleccionado (",(0,n.jsx)("strong",{children:d.nombre}),") es de ",d.valor,". Este indicador se mide en ",d.unidad_medida,"."]})]}):(0,n.jsx)(n.Fragment,{})]})})}function c(e){let[s,a]=(0,i.useState)([]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{consultas:s,setConsultas:a}),(0,n.jsx)("hr",{}),(0,n.jsx)(r,{consultas:s,setConsultas:a})]})}var d=a(5131);function h(){return(0,n.jsx)(d.Z,{children:(0,n.jsx)(c,{})})}}},function(e){e.O(0,[664,774,888,179],function(){return e(e.s=8262)}),_N_E=e.O()}]);